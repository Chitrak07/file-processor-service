<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>All-in-One File Converter</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: #f0f2f5; margin: 0; padding: 2rem; display: flex; justify-content: center; }
        .container { background-color: #fff; padding: 2rem; border-radius: 12px; box-shadow: 0 6px 12px rgba(0,0,0,0.1); max-width: 700px; width: 100%; }
        h1 { color: #1c1e21; text-align: center; }
        .tabs { display: flex; border-bottom: 2px solid #ddd; margin-bottom: 1.5rem; }
        .tab-link { padding: 10px 20px; cursor: pointer; border: none; background: none; font-size: 1rem; font-weight: 500; color: #606770; position: relative; }
        .tab-link.active { color: #007bff; }
        .tab-link.active::after { content: ''; position: absolute; bottom: -2px; left: 0; right: 0; height: 2px; background: #007bff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        form { display: flex; flex-direction: column; gap: 1rem; }
        input[type="file"] { border: 1px solid #ccd0d5; padding: 10px; border-radius: 6px; }
        button { background-color: #007bff; color: white; border: none; padding: 12px 20px; border-radius: 6px; cursor: pointer; font-size: 1rem; font-weight: bold; transition: background-color 0.2s; }
        button:hover { background-color: #0056b3; }
        .result-box, .message-box { margin-top: 1.5rem; padding: 1rem; border-radius: 6px; text-align: center; }
        .message-box.success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .message-box.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .download-link { display: inline-block; background-color: #28a745; color: white !important; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; margin-right: 10px; }
        .compress-link { display: inline-block; background-color: #ffc107; color: #212529 !important; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-weight: bold; }
    </style>
</head>
<body>
<div class="container">
    <h1>All-in-One File Converter</h1>

    <div class="tabs">
        <button class="tab-link active" onclick="openTab(event, 'wordToPdf')">Word → PDF</button>
        <button class="tab-link" onclick="openTab(event, 'pdfToWord')">PDF → Word</button>
        <button class="tab-link" onclick="openTab(event, 'imgToPdf')">Image → PDF</button>
    </div>

    <div id="wordToPdf" class="tab-content active">
        <h2>Convert Word to PDF</h2>
        <form th:action="@{/convert/docx-to-pdf}" method="post" enctype="multipart/form-data">
            <input type="file" name="file" accept=".docx" required>
            <button type="submit">Convert to PDF</button>
        </form>
    </div>

    <div id="pdfToWord" class="tab-content">
        <h2>Convert PDF to Word</h2>
        <form th:action="@{/convert/pdf-to-docx}" method="post" enctype="multipart/form-data">
            <input type="file" name="file" accept=".pdf" required>
            <button type="submit">Convert to Word</button>
        </form>
    </div>

    <div id="imgToPdf" class="tab-content">
        <h2>Merge Images to PDF</h2>
        <form th:action="@{/convert/images-to-pdf}" method="post" enctype="multipart/form-data">
            <input type="file" name="files" accept="image/jpeg, image/png" required multiple>
            <div>
                <input type="checkbox" id="compress" name="compress" value="true">
                <label for="compress">Compress images before creating PDF</label>
            </div>
            <button type="submit">Create PDF</button>
        </form>
    </div>

    <div th:if="${message or errorMessage}" class="result-box">
        <div th:if="${message}" class="message-box success" th:text="${message}"></div>
        <div th:if="${errorMessage}" class="message-box error" th:text="${errorMessage}"></div>

        <div th:if="${downloadUrl}" style="margin-top: 1rem;">
            <a th:href="@{${downloadUrl}}" class="download-link">Download File</a>
            <a th:if="${originalFilename != null and #strings.endsWith(originalFilename, '.pdf')}"
               th:href="@{/compress/{filename}(filename=${originalFilename})}" class="compress-link">Compress PDF</a>
        </div>
    </div>

</div>

<script>
    function openTab(evt, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tab-link");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabName).style.display = "block";
        evt.currentTarget.className += " active";
    }
</script>
</body>
</html>